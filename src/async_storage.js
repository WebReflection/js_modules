/*!
(C) Andrea Giammarchi, @WebReflection - Mit Style License
*/
(function(O,N){if(O in N){return}if(typeof exports!="undefined"){N.create=k;N=global}else{N[O]={create:k}}function i(){try{k("_",o,o,1024)}catch(Y){E=B}}function k(Y,ab,aa,Z){return new E(Y,ab||o,aa||o,Z||1<<20)}function A(){return"".concat.apply("",arguments)}function o(){undefined}var e=k.bind||function(Y){var aa=this,Z=[].slice.call(arguments,1);return function(){return aa.apply(Y,Z.concat.apply(Z,arguments))}},q=[].indexOf||function(Z){for(var Y=this.length;Y--&&this[Y]!==Z;){}return Y},M=N.setTimeout,z="\x00",f="ndexedDB",P="openDatabase",K="executeSql",D="transaction",S="readTransaction",C="localStorage",s="prototype",u=O+"_data",J=O+"_key",g=O+"_value",H="_keys",x="length",h="key",T="getItem",W="setItem",V="removeItem",m="clear",R=N["i"+f]||N["webkitI"+f]||N["mozI"+f]||N["msI"+f],B=null,v=N.Math.max,E,X,a,t,L,c,U,Q,G,y,F,l,n,p,w;if(P in N){E=function E(Z,ad,ac,aa){var Y=this;ac=e.call(ac,Y);Y.name=Z;Y.type="WebSQL";try{(Y._db=N[P](Z,"1.0","",aa))[D](e.call(a,Y,ad,ac),ac)}catch(ab){ac(ab)}};a=function(aa,Z,Y){Y[K](A("CREATE TABLE IF NOT EXISTS ",u," ","(",g," TEXT NOT NULL,",J," TEXT NOT NULL PRIMARY KEY",")"),[],e.call(t,this,aa,Z),Z)};t=function(Z,Y){this._db[S](e.call(L,this,Z,Y))};L=function(aa,Z,Y){Y[K](A("SELECT ",J," AS k FROM ",u),[],e.call(c,this,aa),Z)};c=function(ad,aa,Y){for(var ab=this[H]=[],ac=Y.rows,Z=ac[x];Z--;ab[Z]=ac.item(Z).k){}ad.call(this,this,this[x]=ab[x])};F=function(Y,Z,ab,aa){if(!aa){this[x]=this[H].push(Y)}ab.call(this,Z,Y,this)};U=function(Z,ab,ad,aa,ac,Y){Y[K](ac?A("UPDATE ",u," SET ",g," = ? WHERE ",J," = ?"):A("INSERT INTO ",u," VALUES (?, ?)"),[ab,Z],e.call(F,this,Z,ab,ad,ac),aa)};l=function(aa,ac,ad,ab,Z,Y){this._db[D](e.call(U,this,aa,ac,ad,ab,!!Y.rows.length))};Q=function(Z,ac,ad,ab,aa,Y){Y[K](A("SELECT ",g," AS v FROM ",u," WHERE ",J," = ?"),[Z],e.call(aa,this,Z,ac,ad,ab),ab)};n=function(aa,ad,ae,ac,Z,Y){var ab=Y.rows;ae.call(this,ab[x]?ab.item(0).v:ad,aa,this)};p=function(Z){var Y=this;Z.call(Y,Y,Y[H][x]=Y[x]=0)};G=function(aa,Z,Y){Y[K](A("DELETE FROM ",u),[],e.call(p,this,aa),Z)};w=function(ab,ac,aa,Y){if(this[x]=this[x]-v(Y.rowsAffected?1:0)){var Z=q.call(this[H],ab);if(~Z){this[H].splice(Z,1)}}else{this[H][x]=0}ac.call(this,ab,this)};y=function(Z,ab,aa,Y){Y[K](A("DELETE FROM ",u," WHERE ",J," = ?"),[Z],e.call(w,this,Z,ab),aa)};X=E[s];X[h]=function r(Y){return this[H][Y]};X[V]=function j(Y,aa,Z){this._db[D](e.call(y,this,Y,aa||o,e.call(Z||o,this)))};X[m]=function I(Z,Y){this._db[D](e.call(G,this,Z||o,e.call(Y||o,this)))};X[T]=function b(Y,aa,Z){this._db[S](e.call(Q,this,Y,null,aa||o,e.call(Z||o,this),n))};X[W]=function d(Y,aa,ab,Z){this._db[S](e.call(Q,this,Y,aa,ab||o,e.call(Z||o,this),l))};i()}if(!E&&C in N){E=function E(Z,ab,aa){var Y=this;Y.name=Z;Y.type=C;Y._db=N[C];Y._prefix=escape(u+z+Y.name+z);Y[H]=[];c.call(Y);M(e.call(ab,Y,Y,Y[x]),0)};c=function(){for(var aa=this,af=aa._prefix,ae=aa[H],Z=aa._db,Y=0,ac=0,ad=Z[x],ab;ac<ad;++ac){if(!(ab=Z[h](ac)||"").indexOf(af)){ae[Y++]=ab}}aa[x]=Y};y=function(ab,ae,ad){var Z=this,ac=Z[H],Y=Z._prefix+ab,aa=q.call(ac,Y);if(~aa){ac.splice(aa,1);Z._db[V](Y)}ae.call(Z,ab,Z)};G=function(ad,ac){for(var Y=this,ab=Y[H],Z=0,aa=ab[x];Z<aa;++Z){Y._db[V](ab[Z])}ad.call(Y,Y,Y[x]=Y[H][x]=0)};Q=function(Z,ab,aa){var Y=this;ab.call(Y,Y._db[T](Y._prefix+Z),Z,Y)};U=function(aa,ac,ae,ab){var Z=this,Y=Z._prefix+aa;try{Z._db[W](Y,ac);if(!~q.call(Z[H],Y)){Z[x]=Z[H].push(Y)}ae.call(Z,ac,aa,Z)}catch(ad){ab.call(Z,ad)}};t=function(Y){if(Y._db[x]<Y[H][x]){throw"unobtrusive attempt to manipulate the localStorage"}return Y};X=E[s];X[h]=function r(Z){var Y=t(this)[H][Z];return Y==B?Y:Y.slice(this._prefix[x])};X[V]=function j(Y,aa,Z){M(e.call(y,t(this),Y,aa||o,Z||o),0)};X[m]=function I(Z,Y){M(e.call(G,t(this),Z||o,Y||o),0)};X[T]=function b(Y,aa,Z){M(e.call(Q,t(this),Y,aa||o,Z||o),0)};X[W]=function d(Y,aa,ab,Z){M(e.call(U,t(this),Y,aa,ab||o,Z||o),0)};i()}if(!E){E=function E(Z,ab,aa){var Y=this;Y.name=Z;Y.type="cookie";Y._db=N.document;Y._prefix=u+z+Y.name+z;Y[H]=[];c.call(Y);M(e.call(ab,Y,Y,Y[x]),0)};c=function(){for(var ag=this,ah=ag._db.cookie.split(";"),ad=escape(ag._prefix),af=ag[H],aa=0,ac=0,Y=ah[x],Z,ab,ae;ac<Y;++ac){Z=ah[ac];if(!~Z.indexOf(ad)){af[aa++]=unescape(Z.slice(0,Z.indexOf("=")))}}ag[x]=aa};t=function(Y){if(Y._db.cookie[x]<Y[H].join(";")[x]){throw"unobtrusive attempt to manipulate cookies"}return Y};y=function(ab,af,ad){var Z=this,ac=Z[H],ae=Z._prefix+ab,Y=escape(ae),aa=Z._db.cookie.indexOf(Y);if(~aa){Z._db.cookie=Y+"=;expires=Thu, 01-Jan-1970 00:00:01 GMT";aa=q.call(ac,ae);if(~aa){ac.splice(aa,1);Z[x]=ac.length}}af.call(Z,ab,Z)};G=function(ad,ac){for(var Y=this,ab=Y._prefix,aa=Y[H],Z=aa.length;Z--;y.call(Y,aa[Z].slice(ab.length),o,o)){}ad.call(Y,Y,Y[x]=Y[H][x]=0)};Q=function(ab,ad,aa){var ae=this,af=ae._db.cookie,Z=escape(ae._prefix+ab),ac=af.indexOf(Z+"=")+Z[x],ag=B,Y;if(++ac>Z[x]){Y=af.indexOf(";",ac);Y<0&&(Y=af[x]);ag=unescape(af.substr(ac,Y-ac))}ad.call(ae,ag,ab,ae)};U=function(ab,ae,af,ad){var aa=this,Z=aa._db.cookie,Y=aa._prefix+ab,ac=escape(Y);if(!~Z.indexOf(ac)){aa[x]=aa[H].push(Y)}aa._db.cookie=A(ac,"=",escape(ae),";","expires=",(new Date(+new Date+365*60*60*24)).toGMTString());af.call(aa,ae,ab,aa)};X=E[s];X[h]=function r(Z){var Y=t(this)[H][Z];return Y==B?Y:Y.slice(this._prefix[x])};X[V]=function j(Y,aa,Z){M(e.call(y,t(this),Y,aa||o,Z||o),0)};X[m]=function I(Z,Y){M(e.call(G,t(this),Z||o,Y||o),0)};X[T]=function b(Y,aa,Z){M(e.call(Q,t(this),Y,aa||o,Z||o),0)};X[W]=function d(Y,aa,ab,Z){M(e.call(U,t(this),Y,aa,ab||o,Z||o),0)};i()}}("asyncStorage",this));